{"version":3,"sources":["../src/chrome/chromeTargetDiscoveryStrategy.ts"],"names":[],"mappings":"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","file":"chromeTargetDiscoveryStrategy.js","sourceRoot":"../..","sourcesContent":["/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\n\nimport { Logger } from 'vscode-debugadapter';\nimport * as utils from '../utils';\nimport * as telemetry from '../telemetry';\nimport { IStepStartedEventsEmitter, StepProgressEventsEmitter, IObservableEvents } from '../executionTimingsReporter';\n\nimport * as chromeUtils from './chromeUtils';\n\nimport { ITargetDiscoveryStrategy, ITargetFilter, ITarget } from './chromeConnection';\n\nimport * as nls from 'vscode-nls';\nconst localize = nls.loadMessageBundle();\n\nexport class Version {\n    static parse(versionString: string): Version {\n        const majorAndMinor = versionString.split('.');\n        const major = parseInt(majorAndMinor[0], 10);\n        const minor = parseInt(majorAndMinor[1], 10);\n        return new Version(major, minor);\n    }\n\n    public static unknownVersion(): Version {\n        return new Version(0, 0); // Using 0.0 will make behave isAtLeastVersion as if this was the oldest possible version\n    }\n\n    constructor(private _major: number, private _minor: number) {}\n\n    public isAtLeastVersion(major: number, minor: number): boolean {\n        return this._major > major || (this._major === major && this._minor >= minor);\n    }\n}\n\nexport class TargetVersions {\n    constructor(public readonly protocol: Version, public readonly browser: Version) {}\n}\n\nexport class ChromeTargetDiscovery implements ITargetDiscoveryStrategy, IObservableEvents<IStepStartedEventsEmitter> {\n    private logger: Logger.ILogger;\n    private telemetry: telemetry.ITelemetryReporter;\n    public readonly events = new StepProgressEventsEmitter();\n\n    constructor(_logger: Logger.ILogger, _telemetry: telemetry.ITelemetryReporter) {\n        this.logger = _logger;\n        this.telemetry = _telemetry;\n    }\n\n    async getTarget(address: string, port: number, targetFilter?: ITargetFilter, targetUrl?: string): Promise<ITarget> {\n        const targets = await this.getAllTargets(address, port, targetFilter, targetUrl);\n        if (targets.length > 1) {\n            this.logger.log('Warning: Found more than one valid target page. Attaching to the first one. Available pages: ' + JSON.stringify(targets.map(target => target.url)));\n        }\n\n        const selectedTarget = targets[0];\n\n        this.logger.verbose(`Attaching to target: ${JSON.stringify(selectedTarget)}`);\n        this.logger.verbose(`WebSocket Url: ${selectedTarget.webSocketDebuggerUrl}`);\n\n        return selectedTarget;\n    }\n\n    async getAllTargets(address: string, port: number, targetFilter?: ITargetFilter, targetUrl?: string): Promise<ITarget[]> {\n        const targets = await this._getTargets(address, port);\n        /* __GDPR__\n           \"targetCount\" : {\n              \"numTargets\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n              \"${include}\": [ \"${DebugCommonProperties}\" ]\n           }\n         */\n        this.telemetry.reportEvent('targetCount', { numTargets: targets.length });\n\n        if (!targets.length) {\n            return utils.errP(localize('attach.responseButNoTargets', 'Got a response from the target app, but no target pages found'));\n        }\n\n        return this._getMatchingTargets(targets, targetFilter, targetUrl);\n    }\n\n    private async _getVersionData(address: string, port: number): Promise<TargetVersions> {\n\n        const url = `http://${address}:${port}/json/version`;\n        this.logger.log(`Getting browser and debug protocol version via ${url}`);\n\n        const jsonResponse = await utils.getURL(url, { headers: { Host: 'localhost' } })\n            .catch(e => this.logger.log(`There was an error connecting to ${url} : ${e.message}`));\n\n        try {\n            if (jsonResponse) {\n                const response = JSON.parse(jsonResponse);\n                const protocolVersionString = response['Protocol-Version'] as string;\n                const browserWithPrefixVersionString = response.Browser as string;\n                this.logger.log(`Got browser version: ${browserWithPrefixVersionString }`);\n                this.logger.log(`Got debug protocol version: ${protocolVersionString}`);\n\n                /* __GDPR__\n                   \"targetDebugProtocolVersion\" : {\n                       \"debugProtocolVersion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n                       \"${include}\": [ \"${DebugCommonProperties}\" ]\n                   }\n                 */\n\n                const chromePrefix = 'Chrome/';\n                let browserVersion = Version.unknownVersion();\n                if (browserWithPrefixVersionString.startsWith(chromePrefix)) {\n                    const browserVersionString = browserWithPrefixVersionString.substr(chromePrefix.length);\n                    browserVersion = Version.parse(browserVersionString);\n                }\n\n                this.telemetry.reportEvent('targetDebugProtocolVersion', { debugProtocolVersion: response['Protcol-Version'] });\n                return new TargetVersions(Version.parse(protocolVersionString), browserVersion);\n            }\n        } catch (e) {\n            this.logger.log(`Didn't get a valid response for /json/version call. Error: ${e.message}. Response: ${jsonResponse}`);\n        }\n        return new TargetVersions(Version.unknownVersion(), Version.unknownVersion());\n    }\n\n    private async _getTargets(address: string, port: number): Promise<ITarget[]> {\n\n        // Get the browser and the protocol version\n        const version = this._getVersionData(address, port);\n\n        /* __GDPR__FRAGMENT__\n           \"StepNames\" : {\n              \"Attach.RequestDebuggerTargetsInformation\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n           }\n         */\n        this.events.emitStepStarted('Attach.RequestDebuggerTargetsInformation');\n\n        const checkDiscoveryEndpoint = (url: string) => {\n            this.logger.log(`Discovering targets via ${url}`);\n            return utils.getURL(url, { headers: { Host: 'localhost' } });\n        };\n\n        const jsonResponse = await checkDiscoveryEndpoint(`http://${address}:${port}/json/list`)\n            .catch(() => checkDiscoveryEndpoint(`http://${address}:${port}/json`))\n            .catch(e => utils.errP(localize('attach.cannotConnect', 'Cannot connect to the target: {0}', e.message)));\n\n        /* __GDPR__FRAGMENT__\n           \"StepNames\" : {\n              \"Attach.ProcessDebuggerTargetsInformation\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n           }\n         */\n        this.events.emitStepStarted('Attach.ProcessDebuggerTargetsInformation');\n        let responseArray: any;\n\n        try {\n            responseArray = JSON.parse(jsonResponse);\n        } catch (e) {\n            try {\n                // If it fails to parse, this is possibly https://github.com/electron/electron/issues/11524.\n                // Workaround, just snip out the title property and try again.\n                // Since we don't know exactly which characters might break JSON.parse or why, we can't give a more targeted fix.\n                responseArray = JSON.parse(removeTitleProperty(jsonResponse));\n            } catch (e) {\n                return utils.errP(localize('attach.invalidResponse', 'Response from the target seems invalid. Error: {0}. Response: {1}', e.message, jsonResponse));\n            }\n        }\n\n        if (Array.isArray(responseArray)) {\n            return (responseArray as ITarget[])\n                .map(target => {\n                    this._fixRemoteUrl(address, port, target);\n                    target.version = version;\n                    return target;\n                });\n        } else {\n            return utils.errP(localize('attach.invalidResponseArray', 'Response from the target seems invalid: {0}', jsonResponse));\n        }\n    }\n\n    private _getMatchingTargets(targets: ITarget[], targetFilter?: ITargetFilter, targetUrl?: string): ITarget[] {\n        let filteredTargets = targetFilter ?\n            targets.filter(targetFilter) : // Apply the consumer-specific target filter\n            targets;\n\n        // If a url was specified, try to filter to that url\n        filteredTargets = targetUrl ?\n            chromeUtils.getMatchingTargets(filteredTargets, targetUrl) :\n            filteredTargets;\n\n        if (!filteredTargets.length) {\n            throw new Error(localize('attach.noMatchingTarget', \"Can't find a valid target that matches: {0}. Available pages: {1}\", targetUrl, JSON.stringify(targets.map(target => target.url))));\n        }\n\n        // If all possible targets appear to be attached to have some other devtool attached, then fail\n        const targetsWithWSURLs = filteredTargets.filter(target => !!target.webSocketDebuggerUrl);\n        if (!targetsWithWSURLs.length) {\n            throw new Error(localize('attach.devToolsAttached', \"Can't attach to this target that may have Chrome DevTools attached: {0}\", filteredTargets[0].url));\n        }\n\n        return targetsWithWSURLs;\n    }\n\n    private _fixRemoteUrl(remoteAddress: string, remotePort: number, target: ITarget): ITarget {\n        if (target.webSocketDebuggerUrl) {\n            const addressMatch = target.webSocketDebuggerUrl.match(/ws:\\/\\/([^/]+)\\/?/);\n            if (addressMatch) {\n                const replaceAddress = `${remoteAddress}:${remotePort}`;\n                target.webSocketDebuggerUrl = target.webSocketDebuggerUrl.replace(addressMatch[1], replaceAddress);\n            }\n        }\n\n        return target;\n    }\n}\n\nexport function removeTitleProperty(targetsResponse: string): string {\n    return targetsResponse.replace(/\"title\": \"[^\"]+\",?/, '');\n}"]}